# chap02

## docker hub

- docker hub にレポジトリ作成

# Chap03

## add と copy

add はファイル、ディレクトリ、tar、ネットワーク上のリソース
copy はファイルと、ディレクトリのみ

## CMD と ENTORYPOINT

docker container RUN <コンテナ名> <実行プロセス> <引数>
の実行時、CMD はデフォルト値のようにふるまい、
ENTORYPOINT は原則上書きできない。ただし、--entrypoint を付けると上書きできる。

## 3-1-1-01 　 image の build

image の Build

- docker image build -t [コンテナイメージ名] [Dockerfile のパス]

  例：
  export DOCKERHUB_REPO_NAME="zeta80a"
  docker image build -t ${DOCKERHUB_REPO_NAME}/sample-nginx .

コンテナイメージの確認

- docker container ls [オプション]
  例:
  ocker container ls

build の履歴をみる

- docker image history [オプション] コンテナイメージ名
  例：
  docker image history ${DOCKERHUB_REPO_NAME}/sample-nginx

## 3-1-1-03 　マルチステージビルド & RUN

## 概要

・マルチステージビルドは各ステージ毎にの成果物を次のステージの入力としてりようすることができる。
例えば、FROM golang:1.16.4-alpine3.13 AS builder
の AS 句で builder を指定。

・次のステージで--from=builder オプションで前のステージの成果物を指定できる。
　　 COPY --from=builder /msb /usr/local/bin/msb

・ステージの区切りは FROM 句

## Run

・image の Build。Dockerfile のファイル名が非デフォルトの場合。

- docker image build -t [コンテナイメージ名] -f [Dockerfile のファイル名] [Dockerfile のパス]
  　例:
  　 docker image build -t msb -f Dockerfile-msb .

・image の Run

- docker containter run [オプション] イメージ名 [コマンド] [ARG...]
  例： docker containter run -it --rm msb

### コンテナの内容確認コマンド

イメージを指定してコンテナを対話的に起動後、entrypoint を無視して ls を実行し、コンテナを削除する。

- docker container run -it --rm [--entrypoint コマンド名] イメージ名 [コマンドに渡すオプション]
  例：
  docker container run -it --rm --entrypoint ls msb -la /usr/local/bin/
  docker container run -it --rm --entrypoint vi msb /etc/hosts
